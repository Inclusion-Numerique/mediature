import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';

import { RetrievePasswordForm } from '@mediature/main/app/(visitor-only)/auth/password/retrieve/RetrievePasswordForm';
import { RequestNewPasswordPrefillSchema } from '@mediature/main/models/actions/auth';
import { getTRPCMock } from '@mediature/main/server/mock/trpc';

<Meta title="Forms/RetrievePassword" component={RetrievePasswordForm} />

# RetrievePasswordForm

## Props

<ArgsTable of={RetrievePasswordForm} />

## Examples

<Canvas>
  <Story name="Empty" parameters={commonParameters}>
    <RetrievePasswordForm />
  </Story>
</Canvas>

<Canvas>
  <Story name="Filled" parameters={commonParameters}>
    <RetrievePasswordForm
      prefill={RequestNewPasswordPrefillSchema.parse({
        email: 'jean@france.fr',
      })}
    />
  </Story>
</Canvas>

export const commonParameters = {
  msw: {
    handlers: [
      getTRPCMock({
        type: 'mutation',
        path: ['requestNewPassword'],
        response: {},
      }),
    ],
  },
};
