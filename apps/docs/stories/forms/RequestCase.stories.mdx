import { generateMock } from '@anatine/zod-mock';
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';

import { RequestCaseForm } from '@mediature/main/app/(public)/request/[authority]/RequestCaseForm';
import { RequestCasePrefillSchema } from '@mediature/main/models/actions/case';
import { CaseSchema } from '@mediature/main/models/entities/case';
import { getTRPCMock } from '@mediature/main/server/mock/trpc';

<Meta title="Forms/RequestCase" component={RequestCaseForm} />

# RequestCaseForm

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec euismod, nisl eget consectetur tempor, nisl nunc egestas nisi, euismod aliquam nisl nunc euismod.

## Props

<ArgsTable of={RequestCaseForm} />

## Examples

<Canvas>
  <Story name="Empty" parameters={commonParameters}>
    <RequestCaseForm />
  </Story>
</Canvas>

<Canvas>
  <Story name="Filled" parameters={commonParameters}>
    <RequestCaseForm
      prefill={RequestCasePrefillSchema.parse({
        authorityId: '00000000-0000-0000-0000-000000000000',
        email: 'jean@france.fr',
        firstname: 'Jean',
        lastname: 'Derrien',
        // address: AddressInputSchema,
        // phone: PhoneInputSchema,
        alreadyRequestedInThePast: true,
        gotAnswerFromPreviousRequest: true,
        description:
          'Et velit itaque et ea. Nobis eveniet quo incidunt ut tempora placeat. Quis repellat quod reprehenderit provident ut vero veritatis repellat. Necessitatibus provident blanditiis exercitationem accusantium. Laboriosam quae harum rerum et corrupti rem sed.',
        emailCopyWanted: true,
      })}
    />
  </Story>
</Canvas>

export const commonParameters = {
  msw: {
    handlers: [
      getTRPCMock({
        type: 'mutation',
        path: ['requestCase'],
        response: generateMock(CaseSchema),
      }),
    ],
  },
};
