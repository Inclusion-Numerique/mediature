import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';

import { ResetPasswordForm } from '@mediature/main/app/(visitor-only)/auth/password/reset/ResetPasswordForm';
import { ResetPasswordPrefillSchema } from '@mediature/main/models/actions/auth';
import { getTRPCMock } from '@mediature/main/server/mock/trpc';

<Meta title="Forms/ResetPassword" component={ResetPasswordForm} />

# ResetPasswordForm

## Props

<ArgsTable of={ResetPasswordForm} />

## Examples

<Canvas>
  <Story name="Empty" parameters={commonParameters}>
    <ResetPasswordForm />
  </Story>
</Canvas>

<Canvas>
  <Story name="Filled" parameters={commonParameters}>
    <ResetPasswordForm
      prefill={ResetPasswordPrefillSchema.parse({
        token: 'sunt-aut-quod',
        password: 'mypassword',
      })}
    />
  </Story>
</Canvas>

export const commonParameters = {
  msw: {
    handlers: [
      getTRPCMock({
        type: 'mutation',
        path: ['resetPassword'],
        response: {},
      }),
    ],
  },
};
