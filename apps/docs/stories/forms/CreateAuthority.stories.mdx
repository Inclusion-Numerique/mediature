import { generateMock } from '@anatine/zod-mock';
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';

import { CreateAuthorityForm } from '@mediature/main/app/(private)/dashboard/authority/create/CreateAuthorityForm';
import { CreateAuthorityPrefillSchema } from '@mediature/main/models/actions/authority';
import { AuthoritySchema } from '@mediature/main/models/entities/authority';
import { getTRPCMock } from '@mediature/main/server/mock/trpc';

<Meta title="Forms/CreateAuthority" component={CreateAuthorityForm} />

# CreateAuthorityForm

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec euismod, nisl eget consectetur tempor, nisl nunc egestas nisi, euismod aliquam nisl nunc euismod.

## Props

<ArgsTable of={CreateAuthorityForm} />

## Examples

<Canvas>
  <Story name="Empty" parameters={commonParameters}>
    <CreateAuthorityForm />
  </Story>
</Canvas>

<Canvas>
  <Story name="Filled" parameters={commonParameters}>
    <CreateAuthorityForm
      prefill={CreateAuthorityPrefillSchema.parse({
        type: 'REGION',
        name: 'Bretagne',
        slug: 'my-bzh',
        logoAttachmentId: 'd58ac4a3-7672-403c-ad04-112f5927e2be',
      })}
    />
  </Story>
</Canvas>

export const commonParameters = {
  msw: {
    handlers: [
      getTRPCMock({
        type: 'mutation',
        path: ['createAuthority'],
        response: generateMock(AuthoritySchema),
      }),
    ],
  },
};
